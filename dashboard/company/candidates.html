<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <title>TalentTrack â€“ Candidates</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- Global stylesheet -->
    <link rel="stylesheet" href="../../css/styles.css" />
</head>

<body data-theme="dark">
    <!-- HEADER -->
    <header class="tt-header">
        <div class="tt-header-left">
            <img src="../../img/logo.png" alt="TalentTrack logo" class="tt-logo" />
            <span class="tt-brand-name">TALENTTRACK</span>
        </div>

        <!-- Fallback nav; JS below will replace it with role-aware nav when logged in -->
        <nav class="tt-nav">
            <a href="../../index.html">Home</a>
            <a href="../../jobs.html">Jobs</a>
            <a href="../../freelance.html">Freelance</a>
            <a href="../../auth.html">Login</a>
            <a href="../../register.html" class="tt-btn tt-btn-primary tt-btn-sm">Sign Up</a>
        </nav>

        <button id="darkModeToggle" class="tt-toggle" aria-label="Toggle dark mode">ğŸŒ™</button>
    </header>

    <!-- MAIN -->
    <main class="tt-dashboard">
        <!-- SIDEBAR -->
        <aside class="tt-sidebar">
            <div class="tt-sidebar-profile">
                <div class="tt-avatar">TT</div>
                <div>
                    <h2>TalentTrack Labs</h2>
                    <p>Hiring Partner Â· Tech &amp; Grad Talent</p>
                </div>
            </div>

            <!-- Company sidebar (local links only) -->
            <nav class="tt-sidebar-nav">
                <a href="company.html">ğŸ  Home</a>
                <a href="status.html">ğŸ“Š Status</a>
                <a href="candidates.html" class="active">ğŸ§‘â€ğŸ’» Candidates</a>
                <a href="freelancers.html">ğŸ§‘â€ğŸ¨ Freelancers</a>
                <a href="notifications.html">ğŸ”” Notifications</a>
                <a href="plan.html">ğŸ¢ Company Plan &amp; Verification</a>
                <a href="focus.html">ğŸš€ Todayâ€™s Hiring Focus</a>
                <a href="shortlist.html">ğŸ“„ Shortlist for Future Roles</a>
                <a href="ranking.html">ğŸ† Talent Ranking</a>
                <a href="saved-partnerships.html">ğŸ“š Saved CVs &amp; Partnerships</a>
                <a href="../../messaging.html?view=company">ğŸ’¬ Messaging</a>
                <a href="../../interview-room.html?view=company">ğŸ¥ Interview Room</a>
            </nav>
        </aside>

        <!-- CONTENT -->
        <section class="tt-dashboard-main">

            <div class="tt-card tt-card-jobs">
                <div class="tt-card-header">
                    <h3>Candidate Pipeline</h3>
                    <span class="tt-chip tt-chip-info">Active</span>
                </div>

                <!-- Quick filters (UI only) -->
                <div class="tt-filter-row">
                    <div class="tt-input-group">
                        <label for="candSearch">Search</label>
                        <input id="candSearch" type="text" placeholder="Name, skill, role..." />
                    </div>
                    <div class="tt-input-group">
                        <label for="candStatus">Stage</label>
                        <select id="candStatus">
                            <option value="all">All</option>
                            <option value="screening">Screening</option>
                            <option value="interview">Interview</option>
                            <option value="offer">Offer</option>
                            <option value="rejected">Rejected</option>
                        </select>
                    </div>
                    <div class="tt-input-group">
                        <label for="candRole">Role</label>
                        <input id="candRole" type="text" placeholder="e.g. Junior Developer" />
                    </div>
                </div>

                <!-- Candidate list -->
                <ul id="candList" class="tt-list">
                    <li data-stage="screening" data-role="learner">
                        <div>
                            <strong>Sfiso Tshotwane</strong>
                            <p>Learner: Administration Â· Tech/Cloud</p>
                        </div>
                        <a class="tt-link" href="../../messaging.html?view=company">Message â†’</a>
                    </li>

                    <li data-stage="interview" data-role="junior developer">
                        <div>
                            <strong>Amanda Nkosi</strong>
                            <p>Junior Software Developer Â· React Â· Node.js</p>
                        </div>
                        <a class="tt-link" href="../../messaging.html?view=company">Message â†’</a>
                    </li>

                    <li data-stage="screening" data-role="data intern">
                        <div>
                            <strong>Lehlohonolo Maseko</strong>
                            <p>Data Intern Â· SQL Â· Power BI</p>
                        </div>
                        <a class="tt-link" href="../../messaging.html?view=company">Message â†’</a>
                    </li>

                    <li data-stage="offer" data-role="junior developer">
                        <div>
                            <strong>Ayanda Nkosi</strong>
                            <p>Junior Software Developer Â· React Â· Node.js</p>
                        </div>
                        <a class="tt-link" href="../../messaging.html?view=company">Message â†’</a>
                    </li>

                    <li data-stage="screening" data-role="data intern">
                        <div>
                            <strong>Lerato Mabuza</strong>
                            <p>Data Analyst Intern Â· Excel Â· Power BI Â· SQL</p>
                        </div>
                        <a class="tt-link" href="../../messaging.html?view=company">Message â†’</a>
                    </li>
                </ul>
            </div>

            <!-- Quick actions -->
            <div class="tt-card">
                <div class="tt-card-header">
                    <h3>Quick Actions</h3>
                    <span class="tt-chip">UI only</span>
                </div>
                <div class="tt-badges-row">
                    <div class="tt-badge-card">
                        <span>ğŸ“¤</span>
                        <p>Export shortlist (CSV)</p>
                    </div>
                    <div class="tt-badge-card">
                        <span>ğŸ“¨</span>
                        <p>Send interview invites</p>
                    </div>
                    <div class="tt-badge-card">
                        <span>ğŸ§ª</span>
                        <p>Assign assessments</p>
                    </div>
                </div>
            </div>

        </section>
    </main>

    <!-- FOOTER -->
    <footer class="tt-footer">
        <div class="tt-footer-left">
            <p>Â© <span id="year"></span> TalentTrack. All rights reserved.</p>
            <a href="#about">About</a>
            <a href="#contact">Contact</a>
            <a href="#privacy">Privacy Policy</a>
            <a href="#terms">Terms</a>
        </div>
        <div class="tt-footer-right"><span>ğŸ”—</span><span>ğŸ¦</span><span>ğŸ“·</span></div>
    </footer>

    <!-- Role-aware top nav (like company): Home Â· Jobs Â· Freelance Â· Sign Out -->
    <script>
        (function () {
            const nav = document.querySelector(".tt-nav");
            const role = localStorage.getItem("TT_USER_ROLE");
            const name = localStorage.getItem("TT_USER_NAME");
            const P = "../../"; // path from /dashboard/company/ back to root

            if (nav && role && name) {
                nav.innerHTML = `
          <a href="${P}index.html">Home</a>
          <a href="${P}jobs.html">Jobs</a>
          <a href="${P}freelance.html">Freelance</a>
          <a id="ttSignOut" class="tt-btn tt-btn-sm tt-btn-danger" style="cursor:pointer;">Sign Out</a>
        `;
                const btn = document.getElementById("ttSignOut");
                if (btn) {
                    btn.addEventListener("click", () => {
                        localStorage.removeItem("TT_USER_ROLE");
                        localStorage.removeItem("TT_USER_NAME");
                        localStorage.removeItem("TT_COMPANY_NAME");
                        window.location.href = P + "auth.html";
                    });
                }
            }

            // Simple UI-only filters
            const list = document.getElementById("candList");
            const q = document.getElementById("candSearch");
            const stage = document.getElementById("candStatus");
            const roleInput = document.getElementById("candRole");

            function applyFilters() {
                const t = (q?.value || "").toLowerCase();
                const s = stage?.value || "all";
                const r = (roleInput?.value || "").toLowerCase();

                list.querySelectorAll("li").forEach(li => {
                    const nameText = li.querySelector("strong")?.textContent.toLowerCase() || "";
                    const pText = li.querySelector("p")?.textContent.toLowerCase() || "";
                    const liStage = li.getAttribute("data-stage") || "";
                    const liRole = li.getAttribute("data-role") || "";

                    const matchesQ = !t || nameText.includes(t) || pText.includes(t);
                    const matchesS = (s === "all") || (liStage === s);
                    const matchesR = !r || liRole.includes(r);

                    li.style.display = (matchesQ && matchesS && matchesR) ? "" : "none";
                });
            }

            [q, stage, roleInput].forEach(el => {
                if (!el) return;
                el.addEventListener("input", applyFilters);
                el.addEventListener("change", applyFilters);
            });
            applyFilters();
        })();
    </script>

    <!-- Global script -->
    <script src="../../js/main.js"></script>
</body>

</html>