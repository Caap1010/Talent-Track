<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <title>TalentTrack ‚Äì Company Dashboard</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- Global styles -->
    <link rel="stylesheet" href="../../css/styles.css" />
</head>

<body data-theme="dark">
    <!-- HEADER -->
    <header class="tt-header">
        <div class="tt-header-left">
            <img src="../../img/logo.png" alt="TalentTrack logo" class="tt-logo" />
            <span class="tt-brand-name">TALENTTRACK</span>
        </div>

        <!-- Fallback nav (replaced by JS below when logged in) -->
        <nav class="tt-nav">
            <a href="../../index.html">Home</a>
            <a href="../../jobs.html">Jobs</a>
            <a href="../../freelance.html">Freelance</a>
            <a href="../../auth.html">Login</a>
            <a href="../../register.html" class="tt-btn tt-btn-primary tt-btn-sm">Sign Up</a>
        </nav>

        <button id="darkModeToggle" class="tt-toggle" aria-label="Toggle dark mode">üåô</button>
    </header>

    <!-- MAIN DASHBOARD -->
    <main class="tt-dashboard">
        <!-- SIDEBAR -->
        <aside class="tt-sidebar">
            <div class="tt-sidebar-profile">
                <div class="tt-avatar">TT</div>
                <div>
                    <h2>TalentTrack Labs</h2>
                    <p>Hiring Partner ¬∑ Tech &amp; Grad Talent</p>
                </div>
            </div>

            <!-- Company sidebar (local links only) -->
            <nav class="tt-sidebar-nav">
                <a class="active" href="company.html">üè† Home</a>
                <a href="status.html">üìä Status</a>
                <a href="candidates.html">üßë‚Äçüíª Candidates</a>
                <a href="freelancers.html">üßë‚Äçüé® Freelancers</a>
                <a href="notifications.html">üîî Notifications</a>
                <a href="plan.html">üè¢ Company Plan &amp; Verification</a>
                <a href="focus.html">üöÄ Today‚Äôs Hiring Focus</a>
                <a href="shortlist.html">üìÑ Shortlist for Future Roles</a>
                <a href="ranking.html">üèÜ Talent Ranking</a>
                <a href="saved-partnerships.html">üìö Saved CVs &amp; Partnerships</a>
                <a href="../../messaging.html?view=company">üí¨ Messaging</a>
                <a href="../../interview-room.html?view=company">üé• Interview Room</a>
            </nav>
        </aside>

        <!-- MAIN CONTENT -->
        <section class="tt-dashboard-main">

            <!-- TOP STATS -->
            <div class="tt-grid tt-grid-4">
                <div class="tt-stat-card">
                    <span class="tt-stat-label">Open Roles</span>
                    <strong>7</strong>
                    <span class="tt-stat-trend up">3 closing this month</span>
                </div>

                <div class="tt-stat-card">
                    <span class="tt-stat-label">Active Applications</span>
                    <strong>124</strong>
                    <span class="tt-stat-trend">Across 7 roles</span>
                </div>

                <div class="tt-stat-card">
                    <span class="tt-stat-label">Interviews Scheduled</span>
                    <strong>18</strong>
                    <span class="tt-stat-trend up">+6 this week</span>
                </div>

                <div class="tt-stat-card">
                    <span class="tt-stat-label">Hires This Quarter</span>
                    <strong>9</strong>
                    <span class="tt-stat-trend up">On track</span>
                </div>
            </div>

            <!-- TODAY'S FOCUS + PLAN -->
            <div class="tt-grid tt-grid-2">

                <div class="tt-card">
                    <div class="tt-card-header">
                        <h3>Today‚Äôs Hiring Focus</h3>
                        <span class="tt-chip tt-chip-info">üöÄ Pipeline Health</span>
                    </div>
                    <p>
                        Shortlist at least <strong>5 candidates</strong> for your ‚ÄúJunior Developer‚Äù role and send
                        interview invites.
                    </p>
                    <a href="shortlist.html" class="tt-btn tt-btn-primary tt-btn-sm">View Shortlist</a>
                </div>

                <div class="tt-card">
                    <div class="tt-card-header">
                        <h3>Company Plan &amp; Verification</h3>
                        <span class="tt-chip tt-chip-success">Verified</span>
                    </div>

                    <p class="tt-company-plan-text">
                        You‚Äôre on <strong>VIP</strong>: up to 1 000 students, priority support, branded interview room
                        and early access to features.
                    </p>

                    <div class="tt-plan-badges">
                        <span class="tt-chip">Gold ¬∑ Up to 100 students</span>
                        <span class="tt-chip tt-chip-info">VIP ¬∑ Up to 1 000 students</span>
                        <span class="tt-chip tt-chip-locked">VVIP ¬∑ Unlimited + A+ Academy</span>
                    </div>

                    <a class="tt-btn tt-btn-secondary tt-btn-sm" href="plan.html">Upgrade to VVIP</a>
                </div>
            </div>

            <!-- SHORTLIST + RANKING + SAVED CVS -->
            <div class="tt-grid tt-grid-3">

                <div class="tt-card">
                    <div class="tt-card-header">
                        <h3>Post a Job</h3>
                        <span class="tt-chip">New</span>
                    </div>
                    <div class="tt-card-section">
                        <form id="ttPostJobForm">
                            <label>Job Title<br /><input id="postJobTitle" type="text" required /></label><br />
                            <label>Location<br /><input id="postJobLocation" type="text" /></label><br />
                            <label>Type<br /><input id="postJobType" type="text"
                                    placeholder="Full-time / Freelance" /></label><br />
                            <div style="margin-top:8px;">
                                <button class="tt-btn tt-btn-primary tt-btn-sm">Post Job</button>
                            </div>
                        </form>
                        <div style="margin-top:8px;">
                            <h4>Recent Posts</h4>
                            <ul id="ttCompanyPosts" class="tt-list">
                                <li class="tt-muted">No posts yet.</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <div class="tt-card tt-card-jobs">
                    <div class="tt-card-header">
                        <h3>Shortlist for Future Roles</h3>
                        <a class="tt-link" href="shortlist.html">View all</a>
                    </div>

                    <ul class="tt-list">
                        <li>
                            <div>
                                <strong>Ayanda Nkosi</strong>
                                <p>Junior Software Developer ¬∑ React ¬∑ Node.js</p>
                            </div>
                            <span class="tt-chip tt-chip-info">Top 5%</span>
                        </li>

                        <li>
                            <div>
                                <strong>Lerato Mabuza</strong>
                                <p>Data Analyst Intern ¬∑ Excel ¬∑ Power BI ¬∑ SQL</p>
                            </div>
                            <span class="tt-chip">Pipeline</span>
                        </li>
                    </ul>
                </div>

                <div class="tt-card tt-card-jobs">
                    <div class="tt-card-header">
                        <h3>Talent Ranking</h3>
                        <a class="tt-link" href="ranking.html">Open Stats</a>
                    </div>

                    <ul class="tt-list">
                        <li>
                            <div>
                                <strong>Candidate Ranking</strong>
                                <p>Top profiles for Junior Developer role.</p>
                            </div>
                            <span class="tt-chip tt-chip-info">AI Score</span>
                        </li>

                        <li>
                            <div>
                                <strong>Freelancer Ranking</strong>
                                <p>Top 10 designers for landing page revamp.</p>
                            </div>
                            <span class="tt-chip">Shortlisted</span>
                        </li>
                    </ul>
                </div>

                <div class="tt-card tt-card-academy">
                    <div class="tt-card-header">
                        <h3>Saved CVs &amp; Partnerships</h3>
                    </div>

                    <p>Access CVs you‚Äôve bookmarked and manage partnerships with universities &amp; bootcamps.</p>

                    <a class="tt-btn tt-btn-primary tt-btn-sm" href="saved-partnerships.html">View Saved CVs</a>
                </div>

                <div class="tt-card">
                    <div class="tt-card-header">
                        <h3>Company Wallet</h3>
                        <span class="tt-chip">Balance</span>
                    </div>
                    <div class="tt-card-section">
                        <p>Credits: <strong id="companyCredits">0</strong></p>
                        <p>Post a job to earn credits.</p>
                    </div>
                </div>

            </div>
        </section>
    </main>

    <!-- FOOTER -->
    <footer class="tt-footer">
        <div class="tt-footer-left">
            <p>¬© <span id="year"></span> TalentTrack. All rights reserved.</p>
            <a href="#about">About</a>
            <a href="#contact">Contact</a>
            <a href="#privacy">Privacy Policy</a>
            <a href="#terms">Terms</a>
        </div>
        <div class="tt-footer-right">
            <span aria-label="LinkedIn">üîó</span>
            <span aria-label="Twitter">üê¶</span>
            <span aria-label="Instagram">üì∑</span>
        </div>
    </footer>

    <!-- Role-aware header: on role pages show Sign Out (no Dashboard) -->
    <script>
        (function () {
            const nav = document.querySelector(".tt-nav");
            const role = localStorage.getItem("TT_USER_ROLE");
            const name = localStorage.getItem("TT_USER_NAME");
            const P = "../../"; // from /dashboard/company/ to root

            if (nav && role && name) {
                nav.innerHTML = `
          <a href="${P}index.html">Home</a>
          <a href="${P}jobs.html">Jobs</a>
          <a href="${P}freelance.html">Freelance</a>
          <a id="ttSignOut" class="tt-btn tt-btn-sm tt-btn-danger" style="cursor:pointer;">Sign Out</a>
        `;
                const btn = document.getElementById("ttSignOut");
                if (btn) {
                    btn.addEventListener("click", () => {
                        localStorage.removeItem("TT_USER_ROLE");
                        localStorage.removeItem("TT_USER_NAME");
                        localStorage.removeItem("TT_COMPANY_NAME");
                        window.location.href = P + "auth.html";
                    });
                }
            }
        })();
    </script>

    <script>
        (function () {
            const form = document.getElementById('ttPostJobForm');
            const list = document.getElementById('ttCompanyPosts');

            function renderPosts() {
                const posts = JSON.parse(localStorage.getItem('TT_POSTS') || '[]');
                if (!posts.length) {
                    list.innerHTML = '<li class="tt-muted">No posts yet.</li>';
                    return;
                }
                list.innerHTML = '';
                posts.slice().reverse().forEach(p => {
                    const li = document.createElement('li');
                    li.innerHTML = `<div><strong>${p.title}</strong><p class="tt-job-meta">${p.location} ¬∑ ${p.type} ¬∑ Posted ${new Date(p.date).toLocaleDateString()}</p></div>`;
                    list.appendChild(li);
                });
            }

            if (form) {
                form.addEventListener('submit', function (e) {
                    e.preventDefault();
                    const title = document.getElementById('postJobTitle').value.trim();
                    const location = document.getElementById('postJobLocation').value.trim();
                    const type = document.getElementById('postJobType').value.trim();
                    if (!title) return alert('Please enter a job title.');
                    const posts = JSON.parse(localStorage.getItem('TT_POSTS') || '[]');
                    posts.push({ title, location, type, date: new Date().toISOString() });
                    localStorage.setItem('TT_POSTS', JSON.stringify(posts));
                    renderPosts();
                    form.reset();
                    alert('Job posted locally.');
    <script>
        (function () {
            const creditsEl = document.getElementById('companyCredits');
            function renderCredits() {
                if (!creditsEl) return;
                creditsEl.textContent = localStorage.getItem('TT_COMPANY_CREDITS') || '0';
            }

            const form = document.getElementById('ttPostJobForm');
            const list = document.getElementById('ttCompanyPosts');

            function renderPosts() {
                const posts = JSON.parse(localStorage.getItem('TT_POSTS') || '[]');
                if (!list) return;
                if (!posts.length) {
                    list.innerHTML = '<li class="tt-muted">No posts yet.</li>';
                    return;
                }
                list.innerHTML = '';
                posts.slice().reverse().forEach(p => {
                    const li = document.createElement('li');
                    li.innerHTML = `<div><strong>${p.title}</strong><p class="tt-job-meta">${p.location} ¬∑ ${p.type}</p></div>`;
                    list.appendChild(li);
                });
            }

            if (form) {
                form.addEventListener('submit', function (e) {
                    e.preventDefault();
                    const title = document.getElementById('postJobTitle').value.trim();
                    const location = document.getElementById('postJobLocation').value.trim();
                    const type = document.getElementById('postJobType').value.trim();
                    if (!title) return alert('Please enter a job title.');
                    const posts = JSON.parse(localStorage.getItem('TT_POSTS') || '[]');
                    posts.push({ title, location, type, date: new Date().toISOString() });
                    localStorage.setItem('TT_POSTS', JSON.stringify(posts));
                    // award credits for posting
                    const curr = parseInt(localStorage.getItem('TT_COMPANY_CREDITS') || '0', 10);
                    localStorage.setItem('TT_COMPANY_CREDITS', String(curr + 50));
                    renderPosts();
                    renderCredits();
                    form.reset();
                    alert('Job posted locally. You earned 50 credits.');
                });
            }

            renderPosts();
            renderCredits();
        })();
    </script>
    <script src="../../js/main.js"></script>
            }

            renderPosts();
        })();
    </script>

    <!-- Global scripts -->
    <script src="../../js/main.js"></script>
</body>

</html>